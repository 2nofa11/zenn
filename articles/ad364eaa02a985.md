---
title: "æ¬¡ä¸–ä»£Form Librariesã®Regleã«å…¥é–€ã—ã¦ã¿ã‚‹"
emoji: "ğŸ‘»"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Vue", "Regle", "TypeScript"]
published: false
---

## ã¯ã˜ã‚ã«

[éå»ã®è¨˜äº‹](https://zenn.dev/shava2c/articles/e0649fab434339)ã§Vueã§TanStack Formã‚’è§¦ã£ã¦ã¿ã¾ã—ãŸãŒã€ç«¶åˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦[Regle](https://reglejs.dev/)ãŒå­˜åœ¨ã—ã¾ã™ã€‚

https://reglejs.dev/

Regleã‚’è§¦ã£ãŸã“ã¨ãŒãªã‹ã£ãŸã®ã§ã€èª¿ã¹ã¦è§¦ã£ã¦ã¿ãŸã“ã¨ã‚’ã¾ã¨ã‚ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚

## Regleã¨ã¯

å…¬å¼ã®ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã§ä»¥ä¸‹ã®è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã€‚

> `Headless form validation for Vue.js
> Type safe, model-based and intuitive API.
> The perfect evolution of Vuelidate.`
>
> Vue.jsã®ãŸã‚ã®ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãªãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
> å‹å®‰å…¨ã§ã€ãƒ¢ãƒ‡ãƒ«ã«åŸºã¥ã„ãŸç›´æ„Ÿçš„API
> Vuelidateã®å®Œç’§ãªé€²åŒ–å½¢ã€‚

[Vuelidate](https://vuelidate-next.netlify.app/)ã¯Vue 2ã®æ™‚ã‹ã‚‰å­˜åœ¨ã™ã‚‹Formãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã“ã¨ã§ã™ã€‚
`The perfect evolution of Vuelidate.`ã¨è¨˜è¼‰ãŒã‚ã‚‹ã¨ãŠã‚Šã€[Vuelidateã‹ã‚‰ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰](https://reglejs.dev/introduction/migrate-from-vuelidate)ã‚‚ã‚ã‚Šã¾ã™ã­ã€‚ï¼ˆè‹¥å¹²ãƒãƒ¼ãƒ‰ãƒ«ä¸Šã’ã¦ãªã„ã‹ãªã¨æ€ã„ã¤ã¤...ğŸ¤”ï¼‰

[Tanstack Formsã¨ã®æ¯”è¼ƒã«ã¤ã„ã¦ã®è¨˜è¼‰](https://reglejs.dev/introduction/comparisons#tanstack-forms)ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚

> Regle is a more lightweight and less boilerplate alternative to Tanstack Forms.
>
> Regleã¯ã€Tanstack Formsã‚ˆã‚Šã‚‚è»½é‡ã§ã€ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã‚‚å°‘ãªã„ä»£æ›¿æ‰‹æ®µã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚

ç§ã‚‚Tanstack Formsã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ›¸ã„ãŸã¨ãã€ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆãŒå¤šã„ãªã¨æ„Ÿã˜ã¦ã„ãŸã®ã§æœŸå¾…ãŒè†¨ã‚‰ã¿ã¾ã™ã€‚

https://zenn.dev/shava2c/articles/e0649fab434339

## æ¤œè¨¼

[RegleãŒæä¾›ã—ã¦ã„ã‚‹Playgroundç’°å¢ƒ](https://play.reglejs.dev/)ãŒã‚ã‚‹ã®ã§ãã¡ã‚‰ã‚’ä½¿ã„ã¾ã™ã€‚

### ãƒ•ã‚©ãƒ¼ãƒ ã®è¦ä»¶

* åå‰ã‚’ç™»éŒ²ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒ 
* ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ¡ä»¶
    * ã‚µãƒ–ãƒŸãƒƒãƒˆæ™‚ã€ãƒ–ãƒ©ãƒ¼æ™‚ã§æ¤œçŸ¥
* ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å†…å®¹
    * ç©ºæ–‡å­—å…¥åŠ›ã®å ´åˆã¯ã€Œåå‰ã¯å¿…é ˆã§ã™ã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤º

### å®Ÿè£…ä¾‹

Regleã‚’ä½¿ã£ã¦æ›¸ãã¨ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

```vue
<script setup lang="ts">
import { ref } from 'vue'
import { useRegle } from '@regle/core'
import { required, withMessage } from '@regle/rules'

const state = ref<null | string>(null);
const { r$ } = useRegle(state, { 
  required: withMessage(required, 'åå‰ã¯å¿…é ˆã§ã™')
})
async function handleSubmit() {
  const { valid, data } = await r$.$validate()
  if (valid) {
    alert(data)
  } else {
    console.warn('Errors: ', r$.$errors)
  }
}
</script>

<template>
  <form @submit.prevent.stop="handleSubmit">
    <div>
      <label for="userName">åå‰</label>
      <input
        id="userName"
        name="userName"
        v-model="r$.$value"
        @blur="r$.$validate()"
      />
      <p v-if="r$.$error">{{ r$.$errors[0] }}</p>
    </div>
    <button type="submit">Submit</button>
  </form>
</template>
```


ãŠã€`useRegle`ã¨ã„ã†é–¢æ•°ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã­ã€é †ã€…ã«è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

### ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜

#### `useRegle`

Regleã®ä¸­æ ¸ã¨ãªã‚‹æ©Ÿèƒ½ã§ã™ã€‚
å…¬å¼ã«è¼‰ã£ã¦ã„ã‚‹ã‚ˆã†ã«ã€çŠ¶æ…‹ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ãªã©ã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã§ã™ã€‚

```ts
const { r$ } = useRegle(
  /* 1. Your data (state) */,
  /* 2. Your validation rules */,
  /* 3. Optional modifiers */
);
```

ã¾ãŸã€ç¬¬äºŒå¼•æ•°ã®`required`ã«ã¯è‡ªåˆ†ã§è¨­å®šã—ãŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°ã‚„Regleã‹ã‚‰æä¾›ã•ã‚Œã‚‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°ã‚’è¨­å®šã§ãã¾ã™ã€‚
[Built-in rules](https://reglejs.dev/core-concepts/rules/built-in-rules#built-in-rules) ãŒã‹ãªã‚Šå……å®Ÿã—ã¦ã„ã‚‹...!

ä»Šå›ã¯å˜ä¸€ã®çŠ¶æ…‹ã ã‘ãªã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚

```ts
const state = ref<null | string>(null);
const { r$ } = useRegle(state, { 
  required: withMessage(required, 'åå‰ã¯å¿…é ˆã§ã™')
})
```

[Built-in wrappers](https://reglejs.dev/core-concepts/rules/rule-wrappers#built-in-wrappers)ã®withMessageã‚’ä½¿ã£ã¦ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚

#### `<template>`

`useRegle`ã®æˆ»ã‚Šå€¤`r$`ã®`$`ä»˜ããƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢ã™ã‚‹å‡¦ç†ãŒä¸€æ‰‹ã«ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

* **`$value`**ï¼šãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ‡ãƒ¼ã‚¿ã‚’ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°

* **`$validate`**ï¼šãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œé–¢æ•°

* **`$error`ã¨`$errors`**ï¼šã‚¨ãƒ©ãƒ¼æœ‰ç„¡ã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é…åˆ—

`r$`ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¿…è¦ãªè¦ç´ ãŒå‡ç¸®ã•ã‚Œã¦ã„ã¾ã™ã€‚
[Validation properties](https://reglejs.dev/core-concepts/validation-properties#value)ã‚’èª­ã¿è¾¼ã‚€ã¨ã‚‚ã£ã¨è¸ã¿è¾¼ã‚“ã ã“ã¨ãŒã§ããã†ã§ã™ã€‚

#### `handleSubmit`

ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã«ã‚ˆã‚‹`handleSubmit`é–¢æ•°å†…ã§ã‚‚`r$`ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚

`r$.$validate()`ã®æˆ»ã‚Šå€¤`valid`ã¨`data`ã‚’åˆ©ç”¨ã—ã¦ãã®å¾Œã®å‡¦ç†ã‚’æ›¸ã‘ã‚‹ã®ã§ç›´æ„Ÿçš„ã§ã™ã­ã€‚

ã¾ãŸ`$validate()`å®Ÿè¡Œå¾Œã€`valid`ãŒ`true`ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é€šéï¼‰ã®å ´åˆã®`data`ã¯ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®çµæœãŒåæ˜ ã•ã‚ŒãŸå‹ã«ãªã‚Šã¾ã™ï¼

ä¾‹ãˆã°ä»Šå›ã®å ´åˆã¯`state`ã®åˆæœŸå€¤ã®å‹ã‚’ `null | string` ã¨ã—ã¦è¨­å®šã—ã¦ã„ã¾ã—ãŸãŒã€`handleSubmit`å†…ã®`data`ã‚’è¦‹ã¦ã¿ã‚‹ã¨`null`ãŒãªããªã£ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã¯`rule`ã«`required`ã‚’è¨­å®šã—ãŸã®ã§ã€RegleãŒå‹ã‚’ãƒŠãƒ­ãƒ¼ã‚¤ãƒ³ã‚°ã—ã¦ãã‚Œã¾ã™ã€‚

![Regleã®å‹ãƒŠãƒ­ãƒ¼ã‚¤ãƒ³ã‚°](/images/Regleã§å‹ã®ãƒŠãƒ­ãƒ¼ã‚¤ãƒ³ã‚°ãŒå®Ÿç¾ã§ãã¦ã„ã‚‹ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ.png)

## çµè«–

Regleã€ã¯ã˜ã‚ã¦è§¦ã£ã¦ã¿ã¾ã—ãŸã€‚
å€‹äººçš„ã«ã¯Tanstack Formsã‚ˆã‚Šã‚‚Vue.jsã‚‰ã—ãæ›¸ã‘ã€ã‹ã¤å‹å®‰å…¨ã«æ›¸ã‘ã‚‹ã®ã§æ¨ã—ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ãªã‚Šã¾ã—ãŸã€‚
ã¾ãŸã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå……å®Ÿã—ã¦ã„ã¦[Cheat Sheet](https://reglejs.dev/cheat-sheet)ã€PlaygroundãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ã®ã‚‚æœ€é«˜ã§ã—ãŸğŸ’¯ã€‚

## å‚è€ƒæ–‡çŒ®

* [Regle - Headless form validation library for Vue.js](https://reglejs.dev/)
* [TanStack Form](https://tanstack.com/form/latest)
